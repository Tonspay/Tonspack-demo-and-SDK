!function(t,r){"use strict";"undefined"!=typeof module&&module.exports?module.exports=r():t.nacl?t.nacl.util=r():(t.nacl={},t.nacl.util=r())}(this,function(){"use strict";function i(t){if(!/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}var t={};return t.decodeUTF8=function(t){if("string"!=typeof t)throw new TypeError("expected string");var r,e=unescape(encodeURIComponent(t)),n=new Uint8Array(e.length);for(r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},t.encodeUTF8=function(t){var r,e=[];for(r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return decodeURIComponent(escape(e.join("")))},"undefined"==typeof atob?"undefined"!=typeof Buffer.from?(t.encodeBase64=function(t){return Buffer.from(t).toString("base64")},t.decodeBase64=function(t){return i(t),new Uint8Array(Array.prototype.slice.call(Buffer.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new Buffer(t).toString("base64")},t.decodeBase64=function(t){return i(t),new Uint8Array(Array.prototype.slice.call(new Buffer(t,"base64"),0))}):(t.encodeBase64=function(t){var r,e=[],n=t.length;for(r=0;r<n;r++)e.push(String.fromCharCode(t[r]));return btoa(e.join(""))},t.decodeBase64=function(t){i(t);var r,e=atob(t),n=new Uint8Array(e.length);for(r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}),t});!function(o){"use strict";function c(t,r){return t<<r|t>>>32-r}function p(t,r){var e=255&t[r+3];return e=e<<8|255&t[r+2],(e=e<<8|255&t[r+1])<<8|255&t[r+0]}function k(t,r){var e=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],n=t[r+4]<<24|t[r+5]<<16|t[r+6]<<8|t[r+7];return new M(e,n)}function b(t,r,e){var n;for(n=0;n<4;n++)t[r+n]=255&e,e>>>=8}function q(t,r,e){t[r]=e.hi>>24&255,t[r+1]=e.hi>>16&255,t[r+2]=e.hi>>8&255,t[r+3]=255&e.hi,t[r+4]=e.lo>>24&255,t[r+5]=e.lo>>16&255,t[r+6]=e.lo>>8&255,t[r+7]=255&e.lo}function i(t,r,e,n,i){var o,s=0;for(o=0;o<i;o++)s|=t[r+o]^e[n+o];return(1&s-1>>>8)-1}function P(t,r,e,n){return i(t,r,e,n,16)}function h(t,r,e,n){return i(t,r,e,n,32)}function K(t,r,e,n,i){var o,s,a,f=new Uint32Array(16),h=new Uint32Array(16),u=new Uint32Array(16),l=new Uint32Array(4);for(o=0;o<4;o++)h[5*o]=p(n,4*o),h[1+o]=p(e,4*o),h[6+o]=p(r,4*o),h[11+o]=p(e,16+4*o);for(o=0;o<16;o++)u[o]=h[o];for(o=0;o<20;o++){for(s=0;s<4;s++){for(a=0;a<4;a++)l[a]=h[(5*s+4*a)%16];for(l[1]^=c(l[0]+l[3]|0,7),l[2]^=c(l[1]+l[0]|0,9),l[3]^=c(l[2]+l[1]|0,13),l[0]^=c(l[3]+l[2]|0,18),a=0;a<4;a++)f[4*s+(s+a)%4]=l[a]}for(a=0;a<16;a++)h[a]=f[a]}if(i){for(o=0;o<16;o++)h[o]=h[o]+u[o]|0;for(o=0;o<4;o++)h[5*o]=h[5*o]-p(n,4*o)|0,h[6+o]=h[6+o]-p(r,4*o)|0;for(o=0;o<4;o++)b(t,4*o,h[5*o]),b(t,16+4*o,h[6+o])}else for(o=0;o<16;o++)b(t,4*o,h[o]+u[o]|0)}function F(t,r,e,n){return K(t,r,e,n,!1),0}function f(t,r,e,n){return K(t,r,e,n,!0),0}function u(t,r,e,n,i,o,s){var a,f,h=new Uint8Array(16),u=new Uint8Array(64);if(!i)return 0;for(f=0;f<16;f++)h[f]=0;for(f=0;f<8;f++)h[f]=o[f];for(;i>=64;){for(F(u,h,s,C),f=0;f<64;f++)t[r+f]=(e?e[n+f]:0)^u[f];for(a=1,f=8;f<16;f++)a=a+(255&h[f])|0,h[f]=255&a,a>>>=8;i-=64,r+=64,e&&(n+=64)}if(i>0)for(F(u,h,s,C),f=0;f<i;f++)t[r+f]=(e?e[n+f]:0)^u[f];return 0}function V(t,r,e,n,i){return u(t,r,null,0,e,n,i)}function z(t,r,e,n,i){var o=new Uint8Array(32);return f(o,n,i,C),V(t,r,e,n.subarray(16),o)}function a(t,r,e,n,i,o,s){var a=new Uint8Array(32);return f(a,o,s,C),u(t,r,e,n,i,o.subarray(16),a)}function g(t,r){var e,n=0;for(e=0;e<17;e++)n=n+(t[e]+r[e]|0)|0,t[e]=255&n,n>>>=8}function l(t,r,e,n,i,o){var s,a,f,h,u=new Uint32Array(17),l=new Uint32Array(17),c=new Uint32Array(17),p=new Uint32Array(17),b=new Uint32Array(17);for(f=0;f<17;f++)l[f]=c[f]=0;for(f=0;f<16;f++)l[f]=o[f];for(l[3]&=15,l[4]&=252,l[7]&=15,l[8]&=252,l[11]&=15,l[12]&=252,l[15]&=15;i>0;){for(f=0;f<17;f++)p[f]=0;for(f=0;f<16&&f<i;++f)p[f]=e[n+f];for(p[f]=1,n+=f,i-=f,g(c,p),a=0;a<17;a++)for(u[a]=0,f=0;f<17;f++)u[a]=0|u[a]+c[f]*(f<=a?l[a-f]:320*l[a+17-f]|0);for(a=0;a<17;a++)c[a]=u[a];for(h=0,f=0;f<16;f++)h=h+c[f]|0,c[f]=255&h,h>>>=8;for(h=h+c[16]|0,c[16]=3&h,h=5*(h>>>2)|0,f=0;f<16;f++)h=h+c[f]|0,c[f]=255&h,h>>>=8;h=h+c[16]|0,c[16]=h}for(f=0;f<17;f++)b[f]=c[f];for(g(c,xt),s=0|-(c[16]>>>7),f=0;f<17;f++)c[f]^=s&(b[f]^c[f]);for(f=0;f<16;f++)p[f]=o[f+16];for(p[16]=0,g(c,p),f=0;f<16;f++)t[r+f]=c[f];return 0}function Y(t,r,e,n,i,o){var s=new Uint8Array(16);return l(s,0,e,n,i,o),P(t,r,s,0)}function s(t,r,e,n,i){var o;if(e<32)return-1;for(a(t,0,r,0,e,n,i),l(t,16,t,32,e-32,t),o=0;o<16;o++)t[o]=0;return 0}function Z(t,r,e,n,i){var o,s=new Uint8Array(32);if(e<32)return-1;if(z(s,0,32,n,i),0!==Y(r,16,r,32,e-32,s))return-1;for(a(t,0,r,0,e,n,i),o=0;o<32;o++)t[o]=0;return 0}function y(t,r){var e;for(e=0;e<16;e++)t[e]=0|r[e]}function v(t){var r,e;for(e=0;e<16;e++)t[e]+=65536,r=Math.floor(t[e]/65536),t[(e+1)*(e<15?1:0)]+=r-1+37*(r-1)*(15===e?1:0),t[e]-=65536*r}function w(t,r,e){for(var n,i=~(e-1),o=0;o<16;o++)n=i&(t[o]^r[o]),t[o]^=n,r[o]^=n}function m(t,r){var e,n,i,o=x(),s=x();for(e=0;e<16;e++)s[e]=r[e];for(v(s),v(s),v(s),n=0;n<2;n++){for(o[0]=s[0]-65517,e=1;e<15;e++)o[e]=s[e]-65535-(o[e-1]>>16&1),o[e-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,w(s,o,1-i)}for(e=0;e<16;e++)t[2*e]=255&s[e],t[2*e+1]=s[e]>>8}function j(t,r){var e=new Uint8Array(32),n=new Uint8Array(32);return m(e,t),m(n,r),h(e,0,n,0)}function G(t){var r=new Uint8Array(32);return m(r,t),1&r[0]}function J(t,r){var e;for(e=0;e<16;e++)t[e]=r[2*e]+(r[2*e+1]<<8);t[15]&=32767}function d(t,r,e){var n;for(n=0;n<16;n++)t[n]=r[n]+e[n]|0}function B(t,r,e){var n;for(n=0;n<16;n++)t[n]=r[n]-e[n]|0}function T(t,r,e){var n,i,o=new Float64Array(31);for(n=0;n<31;n++)o[n]=0;for(n=0;n<16;n++)for(i=0;i<16;i++)o[n+i]+=r[n]*e[i];for(n=0;n<15;n++)o[n]+=38*o[n+16];for(n=0;n<16;n++)t[n]=o[n];v(t),v(t)}function I(t,r){T(t,r,r)}function X(t,r){var e,n=x();for(e=0;e<16;e++)n[e]=r[e];for(e=253;e>=0;e--)I(n,n),2!==e&&4!==e&&T(n,n,r);for(e=0;e<16;e++)t[e]=n[e]}function $(t,r){var e,n=x();for(e=0;e<16;e++)n[e]=r[e];for(e=250;e>=0;e--)I(n,n),1!==e&&T(n,n,r);for(e=0;e<16;e++)t[e]=n[e]}function S(t,r,e){var n,i,o=new Uint8Array(32),s=new Float64Array(80),a=x(),f=x(),h=x(),u=x(),l=x(),c=x();for(i=0;i<31;i++)o[i]=r[i];for(o[31]=127&r[31]|64,o[0]&=248,J(s,e),i=0;i<16;i++)f[i]=s[i],u[i]=a[i]=h[i]=0;for(a[0]=u[0]=1,i=254;i>=0;--i)n=o[i>>>3]>>>(7&i)&1,w(a,f,n),w(h,u,n),d(l,a,h),B(a,a,h),d(h,f,u),B(f,f,u),I(u,l),I(c,a),T(a,h,a),T(h,f,l),d(l,a,h),B(a,a,h),I(f,a),B(h,u,c),T(a,h,St),d(a,a,u),T(h,h,a),T(a,u,c),T(u,f,s),I(f,l),w(a,f,n),w(h,u,n);for(i=0;i<16;i++)s[i+16]=a[i],s[i+32]=h[i],s[i+48]=f[i],s[i+64]=u[i];var p=s.subarray(32),b=s.subarray(16);return X(p,p),T(b,b,p),m(t,b),0}function e(t,r){return S(t,r,Tt)}function H(t,r){return U(r,32),e(t,r)}function A(t,r,e){var n=new Uint8Array(32);return S(n,e,r),f(t,Bt,n,C)}function t(t,r,e,n,i,o){var s=new Uint8Array(32);return A(s,i,o),Ut(t,r,e,n,s)}function Q(t,r,e,n,i,o){var s=new Uint8Array(32);return A(s,i,o),Rt(t,r,e,n,s)}function E(){var t,r,e,n=0,i=0,o=0,s=0;for(e=0;e<arguments.length;e++)t=arguments[e].lo,r=arguments[e].hi,n+=65535&t,i+=t>>>16,o+=65535&r,s+=r>>>16;return i+=n>>>16,o+=i>>>16,s+=o>>>16,new M(65535&o|s<<16,65535&n|i<<16)}function W(t,r){return new M(t.hi>>>r,t.lo>>>r|t.hi<<32-r)}function r(){var t,r=0,e=0;for(t=0;t<arguments.length;t++)r^=arguments[t].lo,e^=arguments[t].hi;return new M(e,r)}function n(t,r){var e,n,i=32-r;return r<32?(e=t.hi>>>r|t.lo<<i,n=t.lo>>>r|t.hi<<i):r<64&&(e=t.lo>>>r|t.hi<<i,n=t.hi>>>r|t.lo<<i),new M(e,n)}function tt(t,r,e){var n=t.hi&r.hi^~t.hi&e.hi,i=t.lo&r.lo^~t.lo&e.lo;return new M(n,i)}function rt(t,r,e){var n=t.hi&r.hi^t.hi&e.hi^r.hi&e.hi,i=t.lo&r.lo^t.lo&e.lo^r.lo&e.lo;return new M(n,i)}function et(t){return r(n(t,28),n(t,34),n(t,39))}function nt(t){return r(n(t,14),n(t,18),n(t,41))}function it(t){return r(n(t,1),n(t,8),W(t,7))}function ot(t){return r(n(t,19),n(t,61),W(t,6))}function st(t,r,e){var n,i,o,s=[],a=[],f=[],h=[];for(i=0;i<8;i++)s[i]=f[i]=k(t,8*i);for(var u=0;e>=128;){for(i=0;i<16;i++)h[i]=k(r,8*i+u);for(i=0;i<80;i++){for(o=0;o<8;o++)a[o]=f[o];for(n=E(f[7],nt(f[4]),tt(f[4],f[5],f[6]),Ct[i],h[i%16]),a[7]=E(n,et(f[0]),rt(f[0],f[1],f[2])),a[3]=E(a[3],n),o=0;o<8;o++)f[(o+1)%8]=a[o];if(i%16==15)for(o=0;o<16;o++)h[o]=E(h[o],h[(o+9)%16],it(h[(o+1)%16]),ot(h[(o+14)%16]))}for(i=0;i<8;i++)f[i]=E(f[i],s[i]),s[i]=f[i];u+=128,e-=128}for(i=0;i<8;i++)q(t,8*i,s[i]);return e}function _(t,r,e){var n,i=new Uint8Array(64),o=new Uint8Array(256),s=e;for(n=0;n<64;n++)i[n]=Nt[n];for(st(i,r,e),e%=128,n=0;n<256;n++)o[n]=0;for(n=0;n<e;n++)o[n]=r[s-e+n];for(o[e]=128,e=256-128*(e<112?1:0),o[e-9]=0,q(o,e-8,new M(s/536870912|0,s<<3)),st(i,o,e),n=0;n<64;n++)t[n]=i[n];return 0}function at(t,r){var e=x(),n=x(),i=x(),o=x(),s=x(),a=x(),f=x(),h=x(),u=x();B(e,t[1],t[0]),B(u,r[1],r[0]),T(e,e,u),d(n,t[0],t[1]),d(u,r[0],r[1]),T(n,n,u),T(i,t[3],r[3]),T(i,i,Et),T(o,t[2],r[2]),d(o,o,o),B(s,n,e),B(a,o,i),d(f,o,i),d(h,n,e),T(t[0],s,a),T(t[1],h,f),T(t[2],f,a),T(t[3],s,h)}function ft(t,r,e){var n;for(n=0;n<4;n++)w(t[n],r[n],e)}function ht(t,r){var e=x(),n=x(),i=x();X(i,r[2]),T(e,r[0],i),T(n,r[1],i),m(t,n),t[31]^=G(e)<<7}function ut(t,r,e){var n,i;for(y(t[0],It),y(t[1],R),y(t[2],R),y(t[3],It),i=255;i>=0;--i)n=e[i/8|0]>>(7&i)&1,ft(t,r,n),at(r,t),at(t,t),ft(t,r,n)}function lt(t,r){var e=[x(),x(),x(),x()];y(e[0],_t),y(e[1],Dt),y(e[2],R),T(e[3],_t,Dt),ut(t,e,r)}function ct(t,r,e){var n,i=new Uint8Array(64),o=[x(),x(),x(),x()];for(e||U(r,32),_(i,r,32),i[0]&=248,i[31]&=127,i[31]|=64,lt(o,i),ht(t,o),n=0;n<32;n++)r[n+32]=t[n];return 0}function pt(t,r){var e,n,i,o;for(n=63;n>=32;--n){for(e=0,i=n-32,o=n-12;i<o;++i)r[i]+=e-16*r[n]*Ot[i-(n-32)],e=r[i]+128>>8,r[i]-=256*e;r[i]+=e,r[n]=0}for(e=0,i=0;i<32;i++)r[i]+=e-(r[31]>>4)*Ot[i],e=r[i]>>8,r[i]&=255;for(i=0;i<32;i++)r[i]-=e*Ot[i];for(n=0;n<32;n++)r[n+1]+=r[n]>>8,t[n]=255&r[n]}function bt(t){var r,e=new Float64Array(64);for(r=0;r<64;r++)e[r]=t[r];for(r=0;r<64;r++)t[r]=0;pt(t,e)}function gt(t,r,e,n){var i,o,s=new Uint8Array(64),a=new Uint8Array(64),f=new Uint8Array(64),h=new Float64Array(64),u=[x(),x(),x(),x()];_(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var l=e+64;for(i=0;i<e;i++)t[64+i]=r[i];for(i=0;i<32;i++)t[32+i]=s[32+i];for(_(f,t.subarray(32),e+32),bt(f),lt(u,f),ht(t,u),i=32;i<64;i++)t[i]=n[i];for(_(a,t,e+64),bt(a),i=0;i<64;i++)h[i]=0;for(i=0;i<32;i++)h[i]=f[i];for(i=0;i<32;i++)for(o=0;o<32;o++)h[i+o]+=a[i]*s[o];return pt(t.subarray(32),h),l}function yt(t,r){var e=x(),n=x(),i=x(),o=x(),s=x(),a=x(),f=x();return y(t[2],R),J(t[1],r),I(i,t[1]),T(o,i,At),B(i,i,t[2]),d(o,t[2],o),I(s,o),I(a,s),T(f,a,s),T(e,f,i),T(e,e,o),$(e,e),T(e,e,i),T(e,e,o),T(e,e,o),T(t[0],e,o),I(n,t[0]),T(n,n,o),j(n,i)&&T(t[0],t[0],Mt),I(n,t[0]),T(n,n,o),j(n,i)?-1:(G(t[0])===r[31]>>7&&B(t[0],It,t[0]),T(t[3],t[0],t[1]),0)}function vt(t,r,e,n){var i,o=new Uint8Array(32),s=new Uint8Array(64),a=[x(),x(),x(),x()],f=[x(),x(),x(),x()];if(-1,e<64)return-1;if(yt(f,n))return-1;for(i=0;i<e;i++)t[i]=r[i];for(i=0;i<32;i++)t[i+32]=n[i];if(_(s,t,e),bt(s),ut(a,f,s),lt(f,r.subarray(32)),at(a,f),ht(o,a),e-=64,h(r,0,o,0)){for(i=0;i<e;i++)t[i]=0;return-1}for(i=0;i<e;i++)t[i]=r[i+64];return e}function wt(t,r){if(t.length!==Lt)throw new Error("bad key size");if(r.length!==N)throw new Error("bad nonce size")}function mt(t,r){if(t.length!==O)throw new Error("bad public key size");if(r.length!==L)throw new Error("bad secret key size")}function D(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function dt(t){for(var r=0;r<t.length;r++)t[r]=0}var M=function(t,r){this.hi=0|t,this.lo=0|r},x=function(t){var r,e=new Float64Array(16);if(t)for(r=0;r<t.length;r++)e[r]=t[r];return e},U=function(){throw new Error("no PRNG")},Bt=new Uint8Array(16),Tt=new Uint8Array(32);Tt[0]=9;var It=x(),R=x([1]),St=x([56129,1]),At=x([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Et=x([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_t=x([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Dt=x([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Mt=x([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),C=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),xt=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]),Ut=s,Rt=Z,Ct=[new M(1116352408,3609767458),new M(1899447441,602891725),new M(3049323471,3964484399),new M(3921009573,2173295548),new M(961987163,4081628472),new M(1508970993,3053834265),new M(2453635748,2937671579),new M(2870763221,3664609560),new M(3624381080,2734883394),new M(310598401,1164996542),new M(607225278,1323610764),new M(1426881987,3590304994),new M(1925078388,4068182383),new M(2162078206,991336113),new M(2614888103,633803317),new M(3248222580,3479774868),new M(3835390401,2666613458),new M(4022224774,944711139),new M(264347078,2341262773),new M(604807628,2007800933),new M(770255983,1495990901),new M(1249150122,1856431235),new M(1555081692,3175218132),new M(1996064986,2198950837),new M(2554220882,3999719339),new M(2821834349,766784016),new M(2952996808,2566594879),new M(3210313671,3203337956),new M(3336571891,1034457026),new M(3584528711,2466948901),new M(113926993,3758326383),new M(338241895,168717936),new M(666307205,1188179964),new M(773529912,1546045734),new M(1294757372,1522805485),new M(1396182291,2643833823),new M(1695183700,2343527390),new M(1986661051,1014477480),new M(2177026350,1206759142),new M(2456956037,344077627),new M(2730485921,1290863460),new M(2820302411,3158454273),new M(3259730800,3505952657),new M(3345764771,106217008),new M(3516065817,3606008344),new M(3600352804,1432725776),new M(4094571909,1467031594),new M(275423344,851169720),new M(430227734,3100823752),new M(506948616,1363258195),new M(659060556,3750685593),new M(883997877,3785050280),new M(958139571,3318307427),new M(1322822218,3812723403),new M(1537002063,2003034995),new M(1747873779,3602036899),new M(1955562222,1575990012),new M(2024104815,1125592928),new M(2227730452,2716904306),new M(2361852424,442776044),new M(2428436474,593698344),new M(2756734187,3733110249),new M(3204031479,2999351573),new M(3329325298,3815920427),new M(3391569614,3928383900),new M(3515267271,566280711),new M(3940187606,3454069534),new M(4118630271,4000239992),new M(116418474,1914138554),new M(174292421,2731055270),new M(289380356,3203993006),new M(460393269,320620315),new M(685471733,587496836),new M(852142971,1086792851),new M(1017036298,365543100),new M(1126000580,2618297676),new M(1288033470,3409855158),new M(1501505948,4234509866),new M(1607167915,987167468),new M(1816402316,1246189591)],Nt=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]),Ot=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Lt=32,N=24,O=32,L=32,kt=N;o.lowlevel={crypto_core_hsalsa20:f,crypto_stream_xor:a,crypto_stream:z,crypto_stream_salsa20_xor:u,crypto_stream_salsa20:V,crypto_onetimeauth:l,crypto_onetimeauth_verify:Y,crypto_verify_16:P,crypto_verify_32:h,crypto_secretbox:s,crypto_secretbox_open:Z,crypto_scalarmult:S,crypto_scalarmult_base:e,crypto_box_beforenm:A,crypto_box_afternm:Ut,crypto_box:t,crypto_box_open:Q,crypto_box_keypair:H,crypto_hash:_,crypto_sign:gt,crypto_sign_keypair:ct,crypto_sign_open:vt,crypto_secretbox_KEYBYTES:Lt,crypto_secretbox_NONCEBYTES:N,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:O,crypto_box_SECRETKEYBYTES:L,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:kt,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},o.randomBytes=function(t){var r=new Uint8Array(t);return U(r,t),r},o.secretbox=function(t,r,e){D(t,r,e),wt(e,r);for(var n=new Uint8Array(32+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+32]=t[o];return s(i,n,n.length,r,e),i.subarray(16)},o.secretbox.open=function(t,r,e){D(t,r,e),wt(e,r);for(var n=new Uint8Array(16+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+16]=t[o];return n.length<32?null:0!==Z(i,n,n.length,r,e)?null:i.subarray(32)},o.secretbox.keyLength=Lt,o.secretbox.nonceLength=N,o.secretbox.overheadLength=16,o.scalarMult=function(t,r){if(D(t,r),32!==t.length)throw new Error("bad n size");if(32!==r.length)throw new Error("bad p size");var e=new Uint8Array(32);return S(e,t,r),e},o.scalarMult.base=function(t){if(D(t),32!==t.length)throw new Error("bad n size");var r=new Uint8Array(32);return e(r,t),r},o.scalarMult.scalarLength=32,o.scalarMult.groupElementLength=32,o.box=function(t,r,e,n){var i=o.box.before(e,n);return o.secretbox(t,r,i)},o.box.before=function(t,r){D(t,r),mt(t,r);var e=new Uint8Array(32);return A(e,t,r),e},o.box.after=o.secretbox,o.box.open=function(t,r,e,n){var i=o.box.before(e,n);return o.secretbox.open(t,r,i)},o.box.open.after=o.secretbox.open,o.box.keyPair=function(){var t=new Uint8Array(O),r=new Uint8Array(L);return H(t,r),{publicKey:t,secretKey:r}},o.box.keyPair.fromSecretKey=function(t){if(D(t),t.length!==L)throw new Error("bad secret key size");var r=new Uint8Array(O);return e(r,t),{publicKey:r,secretKey:new Uint8Array(t)}},o.box.publicKeyLength=O,o.box.secretKeyLength=L,o.box.sharedKeyLength=32,o.box.nonceLength=kt,o.box.overheadLength=o.secretbox.overheadLength,o.sign=function(t,r){if(D(t,r),64!==r.length)throw new Error("bad secret key size");var e=new Uint8Array(64+t.length);return gt(e,t,t.length,r),e},o.sign.open=function(t,r){if(D(t,r),32!==r.length)throw new Error("bad public key size");var e=new Uint8Array(t.length),n=vt(e,t,t.length,r);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=e[o];return i},o.sign.detached=function(t,r){for(var e=o.sign(t,r),n=new Uint8Array(64),i=0;i<n.length;i++)n[i]=e[i];return n},o.sign.detached.verify=function(t,r,e){if(D(t,r,e),64!==r.length)throw new Error("bad signature size");if(32!==e.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+t.length),o=new Uint8Array(64+t.length);for(n=0;n<64;n++)i[n]=r[n];for(n=0;n<t.length;n++)i[n+64]=t[n];return vt(o,i,i.length,e)>=0},o.sign.keyPair=function(){var t=new Uint8Array(32),r=new Uint8Array(64);return ct(t,r),{publicKey:t,secretKey:r}},o.sign.keyPair.fromSecretKey=function(t){if(D(t),64!==t.length)throw new Error("bad secret key size");for(var r=new Uint8Array(32),e=0;e<r.length;e++)r[e]=t[32+e];return{publicKey:r,secretKey:new Uint8Array(t)}},o.sign.keyPair.fromSeed=function(t){if(D(t),32!==t.length)throw new Error("bad seed size");for(var r=new Uint8Array(32),e=new Uint8Array(64),n=0;n<32;n++)e[n]=t[n];return ct(r,e,!0),{publicKey:r,secretKey:e}},o.sign.publicKeyLength=32,o.sign.secretKeyLength=64,o.sign.seedLength=32,o.sign.signatureLength=64,o.hash=function(t){D(t);var r=new Uint8Array(64);return _(r,t,t.length),r},o.hash.hashLength=64,o.verify=function(t,r){return D(t,r),0!==t.length&&0!==r.length&&(t.length===r.length&&0===i(t,0,r,0,t.length))},o.setPRNG=function(t){U=t},function(){var i="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(i&&i.getRandomValues){o.setPRNG(function(t,r){var e,n=new Uint8Array(r);for(e=0;e<r;e+=65536)i.getRandomValues(n.subarray(e,e+Math.min(r-e,65536)));for(e=0;e<r;e++)t[e]=n[e];dt(n)})}else"undefined"!=typeof require&&(i=require("crypto"))&&i.randomBytes&&o.setPRNG(function(t,r){var e,n=i.randomBytes(r);for(e=0;e<r;e++)t[e]=n[e];dt(n)})}()}("undefined"!=typeof module&&module.exports?module.exports:self.nacl=self.nacl||{});var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(t,r,e){if(t!=null)if("number"==typeof t)this.fromNumber(t,r,e);else if(r==null&&"string"!=typeof t)this.fromString(t,256);else this.fromString(t,r)}function nbi(){return new BigInteger(null)}function am1(t,r,e,n,i,o){while(--o>=0){var s=r*this[t++]+e[n]+i;i=Math.floor(s/67108864);e[n++]=s&67108863}return i}function am2(t,r,e,n,i,o){var s=r&32767,a=r>>15;while(--o>=0){var f=this[t]&32767;var h=this[t++]>>15;var u=a*f+h*s;f=s*f+((u&32767)<<15)+e[n]+(i&1073741823);i=(f>>>30)+(u>>>15)+a*h+(i>>>30);e[n++]=f&1073741823}return i}function am3(t,r,e,n,i,o){var s=r&16383,a=r>>14;while(--o>=0){var f=this[t]&16383;var h=this[t++]>>14;var u=a*f+h*s;f=s*f+((u&16383)<<14)+e[n]+i;i=(f>>28)+(u>>14)+a*h;e[n++]=f&268435455}return i}if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,r){var e=BI_RC[t.charCodeAt(r)];return e==null?-1:e}function bnpCopyTo(t){for(var r=this.t-1;r>=0;--r)t[r]=this[r];t.t=this.t;t.s=this.s}function bnpFromInt(t){this.t=1;this.s=t<0?-1:0;if(t>0)this[0]=t;else if(t<-1)this[0]=t+this.DV;else this.t=0}function nbv(t){var r=nbi();r.fromInt(t);return r}function bnpFromString(t,r){var e;if(r==16)e=4;else if(r==8)e=3;else if(r==256)e=8;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else{this.fromRadix(t,r);return}this.t=0;this.s=0;var n=t.length,i=false,o=0;while(--n>=0){var s=e==8?t[n]&255:intAt(t,n);if(s<0){if(t.charAt(n)=="-")i=true;continue}i=false;if(o==0)this[this.t++]=s;else if(o+e>this.DB){this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o;this[this.t++]=s>>this.DB-o}else this[this.t-1]|=s<<o;o+=e;if(o>=this.DB)o-=this.DB}if(e==8&&(t[0]&128)!=0){this.s=-1;if(o>0)this[this.t-1]|=(1<<this.DB-o)-1<<o}this.clamp();if(i)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var r;if(t==16)r=4;else if(t==8)r=3;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else return this.toRadix(t);var e=(1<<r)-1,n,i=false,o="",s=this.t;var a=this.DB-s*this.DB%r;if(s-- >0){if(a<this.DB&&(n=this[s]>>a)>0){i=true;o=int2char(n)}while(s>=0){if(a<r){n=(this[s]&(1<<a)-1)<<r-a;n|=this[--s]>>(a+=this.DB-r)}else{n=this[s]>>(a-=r)&e;if(a<=0){a+=this.DB;--s}}if(n>0)i=true;if(i)o+=int2char(n)}}return i?o:"0"}function bnNegate(){var t=nbi();BigInteger.ZERO.subTo(this,t);return t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var r=this.s-t.s;if(r!=0)return r;var e=this.t;r=e-t.t;if(r!=0)return this.s<0?-r:r;while(--e>=0)if((r=this[e]-t[e])!=0)return r;return 0}function nbits(t){var r=1,e;if((e=t>>>16)!=0){t=e;r+=16}if((e=t>>8)!=0){t=e;r+=8}if((e=t>>4)!=0){t=e;r+=4}if((e=t>>2)!=0){t=e;r+=2}if((e=t>>1)!=0){t=e;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,r){var e;for(e=this.t-1;e>=0;--e)r[e+t]=this[e];for(e=t-1;e>=0;--e)r[e]=0;r.t=this.t+t;r.s=this.s}function bnpDRShiftTo(t,r){for(var e=t;e<this.t;++e)r[e-t]=this[e];r.t=Math.max(this.t-t,0);r.s=this.s}function bnpLShiftTo(t,r){var e=t%this.DB;var n=this.DB-e;var i=(1<<n)-1;var o=Math.floor(t/this.DB),s=this.s<<e&this.DM,a;for(a=this.t-1;a>=0;--a){r[a+o+1]=this[a]>>n|s;s=(this[a]&i)<<e}for(a=o-1;a>=0;--a)r[a]=0;r[o]=s;r.t=this.t+o+1;r.s=this.s;r.clamp()}function bnpRShiftTo(t,r){r.s=this.s;var e=Math.floor(t/this.DB);if(e>=this.t){r.t=0;return}var n=t%this.DB;var i=this.DB-n;var o=(1<<n)-1;r[0]=this[e]>>n;for(var s=e+1;s<this.t;++s){r[s-e-1]|=(this[s]&o)<<i;r[s-e]=this[s]>>n}if(n>0)r[this.t-e-1]|=(this.s&o)<<i;r.t=this.t-e;r.clamp()}function bnpSubTo(t,r){var e=0,n=0,i=Math.min(t.t,this.t);while(e<i){n+=this[e]-t[e];r[e++]=n&this.DM;n>>=this.DB}if(t.t<this.t){n-=t.s;while(e<this.t){n+=this[e];r[e++]=n&this.DM;n>>=this.DB}n+=this.s}else{n+=this.s;while(e<t.t){n-=t[e];r[e++]=n&this.DM;n>>=this.DB}n-=t.s}r.s=n<0?-1:0;if(n<-1)r[e++]=this.DV+n;else if(n>0)r[e++]=n;r.t=e;r.clamp()}function bnpMultiplyTo(t,r){var e=this.abs(),n=t.abs();var i=e.t;r.t=i+n.t;while(--i>=0)r[i]=0;for(i=0;i<n.t;++i)r[i+e.t]=e.am(0,n[i],r,i,0,e.t);r.s=0;r.clamp();if(this.s!=t.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(t){var r=this.abs();var e=t.t=2*r.t;while(--e>=0)t[e]=0;for(e=0;e<r.t-1;++e){var n=r.am(e,r[e],t,2*e,0,1);if((t[e+r.t]+=r.am(e+1,2*r[e],t,2*e+1,n,r.t-e-1))>=r.DV){t[e+r.t]-=r.DV;t[e+r.t+1]=1}}if(t.t>0)t[t.t-1]+=r.am(e,r[e],t,2*e,0,1);t.s=0;t.clamp()}function bnpDivRemTo(t,r,e){var n=t.abs();if(n.t<=0)return;var i=this.abs();if(i.t<n.t){if(r!=null)r.fromInt(0);if(e!=null)this.copyTo(e);return}if(e==null)e=nbi();var o=nbi(),s=this.s,a=t.s;var f=this.DB-nbits(n[n.t-1]);if(f>0){n.lShiftTo(f,o);i.lShiftTo(f,e)}else{n.copyTo(o);i.copyTo(e)}var h=o.t;var u=o[h-1];if(u==0)return;var l=u*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0);var c=this.FV/l,p=(1<<this.F1)/l,b=1<<this.F2;var g=e.t,y=g-h,v=r==null?nbi():r;o.dlShiftTo(y,v);if(e.compareTo(v)>=0){e[e.t++]=1;e.subTo(v,e)}BigInteger.ONE.dlShiftTo(h,v);v.subTo(o,o);while(o.t<h)o[o.t++]=0;while(--y>=0){var w=e[--g]==u?this.DM:Math.floor(e[g]*c+(e[g-1]+b)*p);if((e[g]+=o.am(0,w,e,y,0,h))<w){o.dlShiftTo(y,v);e.subTo(v,e);while(e[g]<--w)e.subTo(v,e)}}if(r!=null){e.drShiftTo(h,r);if(s!=a)BigInteger.ZERO.subTo(r,r)}e.t=h;e.clamp();if(f>0)e.rShiftTo(f,e);if(s<0)BigInteger.ZERO.subTo(e,e)}function bnMod(t){var r=nbi();this.abs().divRemTo(t,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)t.subTo(r,r);return r}function Classic(t){this.m=t}function cConvert(t){if(t.s<0||t.compareTo(this.m)>=0)return t.mod(this.m);else return t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,r,e){t.multiplyTo(r,e);this.reduce(e)}function cSqrTo(t,r){t.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var r=t&3;r=r*(2-(t&15)*r)&15;r=r*(2-(t&255)*r)&255;r=r*(2-((t&65535)*r&65535))&65535;r=r*(2-t*r%this.DV)%this.DV;return r>0?this.DV-r:-r}function Montgomery(t){this.m=t;this.mp=t.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<t.DB-15)-1;this.mt2=2*t.t}function montConvert(t){var r=nbi();t.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(t.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(t){var r=nbi();t.copyTo(r);this.reduce(r);return r}function montReduce(t){while(t.t<=this.mt2)t[t.t++]=0;for(var r=0;r<this.m.t;++r){var e=t[r]&32767;var n=e*this.mpl+((e*this.mph+(t[r]>>15)*this.mpl&this.um)<<15)&t.DM;e=r+this.m.t;t[e]+=this.m.am(0,n,t,r,0,this.m.t);while(t[e]>=t.DV){t[e]-=t.DV;t[++e]++}}t.clamp();t.drShiftTo(this.m.t,t);if(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function montSqrTo(t,r){t.squareTo(r);this.reduce(r)}function montMulTo(t,r,e){t.multiplyTo(r,e);this.reduce(e)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(t,r){if(t>4294967295||t<1)return BigInteger.ONE;var e=nbi(),n=nbi(),i=r.convert(this),o=nbits(t)-1;i.copyTo(e);while(--o>=0){r.sqrTo(e,n);if((t&1<<o)>0)r.mulTo(n,i,e);else{var s=e;e=n;n=s}}return r.revert(e)}function bnModPowInt(t,r){var e;if(t<256||r.isEven())e=new Classic(r);else e=new Montgomery(r);return this.exp(t,e)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var t=nbi();this.copyTo(t);return t}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(t){if(t==null)t=10;if(this.signum()==0||t<2||t>36)return"0";var r=this.chunkSize(t);var e=Math.pow(t,r);var n=nbv(e),i=nbi(),o=nbi(),s="";this.divRemTo(n,i,o);while(i.signum()>0){s=(e+o.intValue()).toString(t).substr(1)+s;i.divRemTo(n,i,o)}return o.intValue().toString(t)+s}function bnpFromRadix(t,r){this.fromInt(0);if(r==null)r=10;var e=this.chunkSize(r);var n=Math.pow(r,e),i=false,o=0,s=0;for(var a=0;a<t.length;++a){var f=intAt(t,a);if(f<0){if(t.charAt(a)=="-"&&this.signum()==0)i=true;continue}s=r*s+f;if(++o>=e){this.dMultiply(n);this.dAddOffset(s,0);o=0;s=0}}if(o>0){this.dMultiply(Math.pow(r,o));this.dAddOffset(s,0)}if(i)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,r,e){if("number"==typeof r){if(t<2)this.fromInt(1);else{this.fromNumber(t,e);if(!this.testBit(t-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(r)){this.dAddOffset(2,0);if(this.bitLength()>t)this.subTo(BigInteger.ONE.shiftLeft(t-1),this)}}}else{var n=new Array,i=t&7;n.length=(t>>3)+1;r.nextBytes(n);if(i>0)n[0]&=(1<<i)-1;else n[0]=0;this.fromString(n,256)}}function bnToByteArray(){var t=this.t,r=new Array;r[0]=this.s;var e=this.DB-t*this.DB%8,n,i=0;if(t-- >0){if(e<this.DB&&(n=this[t]>>e)!=(this.s&this.DM)>>e)r[i++]=n|this.s<<this.DB-e;while(t>=0){if(e<8){n=(this[t]&(1<<e)-1)<<8-e;n|=this[--t]>>(e+=this.DB-8)}else{n=this[t]>>(e-=8)&255;if(e<=0){e+=this.DB;--t}}if((n&128)!=0)n|=-256;if(i==0&&(this.s&128)!=(n&128))++i;if(i>0||n!=this.s)r[i++]=n}}return r}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,r,e){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)e[n]=r(this[n],t[n]);if(t.t<this.t){i=t.s&this.DM;for(n=o;n<this.t;++n)e[n]=r(this[n],i);e.t=this.t}else{i=this.s&this.DM;for(n=o;n<t.t;++n)e[n]=r(i,t[n]);e.t=t.t}e.s=r(this.s,t.s);e.clamp()}function op_and(t,r){return t&r}function bnAnd(t){var r=nbi();this.bitwiseTo(t,op_and,r);return r}function op_or(t,r){return t|r}function bnOr(t){var r=nbi();this.bitwiseTo(t,op_or,r);return r}function op_xor(t,r){return t^r}function bnXor(t){var r=nbi();this.bitwiseTo(t,op_xor,r);return r}function op_andnot(t,r){return t&~r}function bnAndNot(t){var r=nbi();this.bitwiseTo(t,op_andnot,r);return r}function bnNot(){var t=nbi();for(var r=0;r<this.t;++r)t[r]=this.DM&~this[r];t.t=this.t;t.s=~this.s;return t}function bnShiftLeft(t){var r=nbi();if(t<0)this.rShiftTo(-t,r);else this.lShiftTo(t,r);return r}function bnShiftRight(t){var r=nbi();if(t<0)this.lShiftTo(-t,r);else this.rShiftTo(t,r);return r}function lbit(t){if(t==0)return-1;var r=0;if((t&65535)==0){t>>=16;r+=16}if((t&255)==0){t>>=8;r+=8}if((t&15)==0){t>>=4;r+=4}if((t&3)==0){t>>=2;r+=2}if((t&1)==0)++r;return r}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+lbit(this[t]);if(this.s<0)return this.t*this.DB;return-1}function cbit(t){var r=0;while(t!=0){t&=t-1;++r}return r}function bnBitCount(){var t=0,r=this.s&this.DM;for(var e=0;e<this.t;++e)t+=cbit(this[e]^r);return t}function bnTestBit(t){var r=Math.floor(t/this.DB);if(r>=this.t)return this.s!=0;return(this[r]&1<<t%this.DB)!=0}function bnpChangeBit(t,r){var e=BigInteger.ONE.shiftLeft(t);this.bitwiseTo(e,r,e);return e}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,r){var e=0,n=0,i=Math.min(t.t,this.t);while(e<i){n+=this[e]+t[e];r[e++]=n&this.DM;n>>=this.DB}if(t.t<this.t){n+=t.s;while(e<this.t){n+=this[e];r[e++]=n&this.DM;n>>=this.DB}n+=this.s}else{n+=this.s;while(e<t.t){n+=t[e];r[e++]=n&this.DM;n>>=this.DB}n+=t.s}r.s=n<0?-1:0;if(n>0)r[e++]=n;else if(n<-1)r[e++]=this.DV+n;r.t=e;r.clamp()}function bnAdd(t){var r=nbi();this.addTo(t,r);return r}function bnSubtract(t){var r=nbi();this.subTo(t,r);return r}function bnMultiply(t){var r=nbi();this.multiplyTo(t,r);return r}function bnSquare(){var t=nbi();this.squareTo(t);return t}function bnDivide(t){var r=nbi();this.divRemTo(t,r,null);return r}function bnRemainder(t){var r=nbi();this.divRemTo(t,null,r);return r}function bnDivideAndRemainder(t){var r=nbi(),e=nbi();this.divRemTo(t,r,e);return new Array(r,e)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(t,r){if(t==0)return;while(this.t<=r)this[this.t++]=0;this[r]+=t;while(this[r]>=this.DV){this[r]-=this.DV;if(++r>=this.t)this[this.t++]=0;++this[r]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,r,e){t.multiplyTo(r,e)}function nSqrTo(t,r){t.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,r,e){var n=Math.min(this.t+t.t,r);e.s=0;e.t=n;while(n>0)e[--n]=0;var i;for(i=e.t-this.t;n<i;++n)e[n+this.t]=this.am(0,t[n],e,n,0,this.t);for(i=Math.min(t.t,r);n<i;++n)this.am(0,t[n],e,n,0,r-n);e.clamp()}function bnpMultiplyUpperTo(t,r,e){--r;var n=e.t=this.t+t.t-r;e.s=0;while(--n>=0)e[n]=0;for(n=Math.max(r-this.t,0);n<t.t;++n)e[this.t+n-r]=this.am(r-n,t[n],e,0,0,this.t+n-r);e.clamp();e.drShiftTo(1,e)}function Barrett(t){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*t.t,this.r2);this.mu=this.r2.divide(t);this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);else if(t.compareTo(this.m)<0)return t;else{var r=nbi();t.copyTo(r);this.reduce(r);return r}}function barrettRevert(t){return t}function barrettReduce(t){t.drShiftTo(this.m.t-1,this.r2);if(t.t>this.m.t+1){t.t=this.m.t+1;t.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function barrettSqrTo(t,r){t.squareTo(r);this.reduce(r)}function barrettMulTo(t,r,e){t.multiplyTo(r,e);this.reduce(e)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,r){var e=t.bitLength(),n,i=nbv(1),o;if(e<=0)return i;else if(e<18)n=1;else if(e<48)n=3;else if(e<144)n=4;else if(e<768)n=5;else n=6;if(e<8)o=new Classic(r);else if(r.isEven())o=new Barrett(r);else o=new Montgomery(r);var s=new Array,a=3,f=n-1,h=(1<<n)-1;s[1]=o.convert(this);if(n>1){var u=nbi();o.sqrTo(s[1],u);while(a<=h){s[a]=nbi();o.mulTo(u,s[a-2],s[a]);a+=2}}var l=t.t-1,c,p=true,b=nbi(),g;e=nbits(t[l])-1;while(l>=0){if(e>=f)c=t[l]>>e-f&h;else{c=(t[l]&(1<<e+1)-1)<<f-e;if(l>0)c|=t[l-1]>>this.DB+e-f}a=n;while((c&1)==0){c>>=1;--a}if((e-=a)<0){e+=this.DB;--l}if(p){s[c].copyTo(i);p=false}else{while(a>1){o.sqrTo(i,b);o.sqrTo(b,i);a-=2}if(a>0)o.sqrTo(i,b);else{g=i;i=b;b=g}o.mulTo(b,s[c],i)}while(l>=0&&(t[l]&1<<e)==0){o.sqrTo(i,b);g=i;i=b;b=g;if(--e<0){e=this.DB-1;--l}}}return o.revert(i)}function bnGCD(t){var r=this.s<0?this.negate():this.clone();var e=t.s<0?t.negate():t.clone();if(r.compareTo(e)<0){var n=r;r=e;e=n}var i=r.getLowestSetBit(),o=e.getLowestSetBit();if(o<0)return r;if(i<o)o=i;if(o>0){r.rShiftTo(o,r);e.rShiftTo(o,e)}while(r.signum()>0){if((i=r.getLowestSetBit())>0)r.rShiftTo(i,r);if((i=e.getLowestSetBit())>0)e.rShiftTo(i,e);if(r.compareTo(e)>=0){r.subTo(e,r);r.rShiftTo(1,r)}else{e.subTo(r,e);e.rShiftTo(1,e)}}if(o>0)e.lShiftTo(o,e);return e}function bnpModInt(t){if(t<=0)return 0;var r=this.DV%t,e=this.s<0?t-1:0;if(this.t>0)if(r==0)e=this[0]%t;else for(var n=this.t-1;n>=0;--n)e=(r*e+this[n])%t;return e}function bnModInverse(t){var r=t.isEven();if(this.isEven()&&r||t.signum()==0)return BigInteger.ZERO;var e=t.clone(),n=this.clone();var i=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);while(e.signum()!=0){while(e.isEven()){e.rShiftTo(1,e);if(r){if(!i.isEven()||!o.isEven()){i.addTo(this,i);o.subTo(t,o)}i.rShiftTo(1,i)}else if(!o.isEven())o.subTo(t,o);o.rShiftTo(1,o)}while(n.isEven()){n.rShiftTo(1,n);if(r){if(!s.isEven()||!a.isEven()){s.addTo(this,s);a.subTo(t,a)}s.rShiftTo(1,s)}else if(!a.isEven())a.subTo(t,a);a.rShiftTo(1,a)}if(e.compareTo(n)>=0){e.subTo(n,e);if(r)i.subTo(s,i);o.subTo(a,o)}else{n.subTo(e,n);if(r)s.subTo(i,s);a.subTo(o,a)}}if(n.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;if(a.signum()<0)return a.add(t);else return a}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var r,e=this.abs();if(e.t==1&&e[0]<=lowprimes[lowprimes.length-1]){for(r=0;r<lowprimes.length;++r)if(e[0]==lowprimes[r])return true;return false}if(e.isEven())return false;r=1;while(r<lowprimes.length){var n=lowprimes[r],i=r+1;while(i<lowprimes.length&&n<lplim)n*=lowprimes[i++];n=e.modInt(n);while(r<i)if(n%lowprimes[r++]==0)return false}return e.millerRabin(t)}function bnpMillerRabin(t){var r=this.subtract(BigInteger.ONE);var e=r.getLowestSetBit();if(e<=0)return false;var n=r.shiftRight(e);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var i=nbi();for(var o=0;o<t;++o){i.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var s=i.modPow(n,this);if(s.compareTo(BigInteger.ONE)!=0&&s.compareTo(r)!=0){var a=1;while(a++<e&&s.compareTo(r)!=0){s=s.modPowInt(2,this);if(s.compareTo(BigInteger.ONE)==0)return false}if(s.compareTo(r)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;var base58={alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bigRadix:new BigInteger("58"),byte_array:function(t){var r=[];for(var e=0;e<t.length;e++){r.push(t.charCodeAt(e))}return r},string:function(t){var r="";for(var e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r},encode:function(t){var r=t.slice();var e=new BigInteger(r,256);var n="";while(e.compareTo(BigInteger.ZERO)>0){var i=new BigInteger;e.divRemTo(base58.bigRadix,e,i);n=base58.alphabet.charAt(Number(i.toString()))+n}for(var o=0;o<t.length;o++){if(t[o]!=0)break;n=base58.alphabet.charAt(0)+n}return n},decode:function(t){if(t=="")return"";var r=new BigInteger("0");var e=new BigInteger("1");for(var n=t.length-1;n>=0;n--){var i=base58.alphabet.indexOf(t.charAt(n));if(i==-1){return undefined}var o=new BigInteger(""+i);var s=new BigInteger(e.toString());s.dMultiply(o);r=r.add(s);e.dMultiply(base58.bigRadix)}var a=r.toByteArray();while(a[0]==0)a.shift();for(var n=0;n<t.length;n++){if(t.charAt(n)!=base58.alphabet[0]){break}a.unshift(0)}return a}};class Tonspack{constructor(t,r){if(t){this.uuid=t}else{this.uuid=crypto.randomUUID()}if(r?.baseurl){this.baseurl=r.baseurl}else{this.baseurl="https://pack.tons.ink/api"}if(r?.actionUrl){this.actionUrl=r.actionUrl}else{this.actionUrl="https://t.me/tonspack_bot/connect?startapp="}if(r?.loopInterval){this.loopInterval=r.loopInterval}else{this.loopInterval=500}if(r?.loopTimeout){this.loopTimeout=r.loopTimeout}else{this.loopTimeout=120}this.encryptionKp=nacl.box.keyPair()}encode(a,f){try{let t=nacl.box.keyPair();let r=Buffer.from(f);let e=nacl.randomBytes(nacl.box.nonceLength);let n=nacl.box(r,e,a,t.secretKey);let i=Buffer.from(e).toString("base64");let o=Buffer.from(t.publicKey).toString("base64");let s=Buffer.from(n).toString("base64");return{nonce:i,ephemPubKey:o,encrypted:s}}catch(t){return false}}decode(t,r){try{const e=nacl.box.open(new Uint8Array(Buffer.from(r.encrypted,"base64")),new Uint8Array(Buffer.from(r.nonce,"base64")),new Uint8Array(Buffer.from(r.ephemPubKey,"base64")),t);return Buffer.from(e).toString("utf8")}catch(t){return false}}async loopCheck(){for(var t=0;t<this.loopTimeout;t++){const r=await this.check_request_action();if(r?.data){if(r?.key&&r?.key.length>10){let t=JSON.parse(r.data);{return this.decode(this.encryptionKp.secretKey,t)}}else{return r.data}}await this.sleep(this.loopInterval)}return{status:false,reason:"user operation timeout"}}async sleep(r){return new Promise(t=>{setTimeout(t,r)})}async check_request_action(){try{return(await fetch(this.baseurl+"/result/"+this.uuid,{method:"GET",headers:{},redirect:"follow"})).json()}catch(t){console.error(t);return false}}async connect(t,r){const e=window.location.origin;const n={t:0,i:this.uuid,d:e,c:t,r:r||null,k:Buffer.from(this.encryptionKp.publicKey).toString("base64")};window.open(this.actionUrl+base58.encode(Buffer.from(JSON.stringify(n))),"newwindow","height=800, width=400, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no");return await this.loopCheck()}async sign(t,r,e,n){var i={t:1,i:this.uuid,d:r,c:t,r:e||null,k:Buffer.from(this.encryptionKp.publicKey).toString("base64")};if(n){var o=new Headers;o.append("Content-Type","application/json");var s={method:"POST",headers:o,body:JSON.stringify({data:base58.encode(Buffer.from(JSON.stringify(i)))}),redirect:"follow"};await fetch(`${this.baseurl}/preconnect/${i.i}`,s);i={i:this.uuid,p:1}}window.open(this.actionUrl+base58.encode(Buffer.from(JSON.stringify(i))),"newwindow","height=800, width=400, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no");return await this.loopCheck()}async send(t,r,e,n){var i={t:2,i:this.uuid,d:r,c:t,r:e||null,k:Buffer.from(this.encryptionKp.publicKey).toString("base64")};if(n){var o=new Headers;o.append("Content-Type","application/json");var s={method:"POST",headers:o,body:JSON.stringify({data:base58.encode(Buffer.from(JSON.stringify(i)))}),redirect:"follow"};await fetch(`${this.baseurl}/preconnect/${i.i}`,s);i={i:this.uuid,p:1}}window.open(this.actionUrl+base58.encode(Buffer.from(JSON.stringify(i))),"newwindow","height=800, width=400, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no");return await this.loopCheck()}}